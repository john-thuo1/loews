version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    volumes:
      - .:/loews
    environment:
      - DATABASE_ENGINE=django.db.backends.sqlite3
      - DATABASE_NAME=/loews/db.sqlite3
    command: >
      sh -c "python manage.py makemigrations && python manage.py migrate && echo \"from django.contrib.auth.models import User; User.objects.create_superuser('admin', 'admin@example.com', 'adhominem1234')\" | python manage.py shell && python manage.py runserver 0.0.0.0:3000"
    container_name: project_loews
